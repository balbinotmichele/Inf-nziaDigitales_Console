<ion-header>
  <ion-navbar color="grey2">
    <ion-title float-start>
       <img src="assets/images/icona_navbar.png" height="40px" />
    </ion-title>
    <button ion-button icon-only float-end color="green2" margin-right> <ion-icon name="exit"></ion-icon></button>
     <button ion-button float-end color="green2" margin-right> 
      <ion-label>Scuola</ion-label>
      <ion-select [(ngModel)]='selectedId' (ngModelChange)="onSchoolChange(selectedId)" interface='popover'>
        <ion-option *ngFor="let item of schools" value="{{item.id}}" >{{item.id}} - {{item.name}}</ion-option>
      </ion-select>
     </button> 
  </ion-navbar>
  <ion-segment [(ngModel)]="settings" (ngModelChange)="onSegmentChange()" color="light" style="background-color: #98ba3c;" *ngIf="selectedSchool">
    <ion-segment-button value="profilo">
      Home
    </ion-segment-button>
    <ion-segment-button value="orari">
      Orari
    </ion-segment-button>
    <ion-segment-button value="gruppi_sezioni">
      Gruppi e sezioni
    </ion-segment-button>
    <ion-segment-button value="bus">
      Bus
    </ion-segment-button>
    <ion-segment-button value="insegnanti">
      Insegnanti
    </ion-segment-button>
    <ion-segment-button value="bambini">
      Bambini
    </ion-segment-button>
  </ion-segment>
</ion-header>

<ion-content padding margin>
  <ion-grid *ngIf="selectedSchool">
    <ion-col col-12>
      <div [ngSwitch]="settings">
        <div *ngSwitchCase="'profilo'">
          <ion-grid inset>
            <ion-row>
              <ion-col col-1><p></p></ion-col>
              <ion-col col-10>
                <ion-card>
                  <ion-card-header>
                    Nome Scuola
                  </ion-card-header>
                  <ion-card-content margin-top>
                    Nome
                  </ion-card-content>
                </ion-card>
              </ion-col>
              <ion-col col-1><p></p></ion-col>
            </ion-row>
            <ion-row>
              <ion-col col-1><p></p></ion-col>
              <ion-col col-sm-10>
                <ion-card>
                  <ion-card-header>
                    Indirizzo
                  </ion-card-header>
                  <ion-card-content margin-top>
                    <p>{{selectedSchool.address}}</p>
                  </ion-card-content>
                </ion-card>
              </ion-col>
              <ion-col col-1><p></p></ion-col>
            </ion-row>
            <ion-row>
              <ion-col col-1><p></p></ion-col>
              <ion-col col-sm-10>
                <ion-card>
                  <ion-card-header>
                    Contatti
                  </ion-card-header>
                  <ion-card-content margin-top>
                    <p>Telefono: <a href="tel: {{selectedSchool.telephone}}">{{selectedSchool.telephone}}</a></p>
                    <p>Email: <a href="{{selectedSchool.email}}">{{selectedSchool.email}}</a></p>
                    <ion-fab style="bottom: -5px; right: -5px">
                      <button ion-fab mini (click)="showPromptOnContattiEdit()"><ion-icon name="md-create"></ion-icon></button>
                    </ion-fab>
                  </ion-card-content>
                </ion-card>
              </ion-col>
              <ion-col col-1><p></p></ion-col>
            </ion-row>      
          </ion-grid>
        </div>
        <div *ngSwitchCase="'gruppi_sezioni'">
          <!-- <ion-grid inset>
            <ion-row>
              <ion-col col-12>
                <button ion-button color="green1" float-end margin-top (click)="newGroupModal()">Crea nuovo gruppo</button>
              </ion-col>
              <ion-col col-12>
                <hr />
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col col-4>
                <ion-item>
                  <ion-label floating>Ordine</ion-label>
                  <ion-select [(ngModel)]='ordine' (ngModelChange)="onOrdineChange(ordine, selectedSchool.groups)" interface='popover'>
                    <ion-option value='0'>Alfabetico A-Z</ion-option>
                    <ion-option value='1'>Alfabetico Z-A</ion-option>
                    <ion-option value='2'>N. Bambini (dal piu grande)</ion-option>
                    <ion-option value='3'>N. Bambini (dal piu piccolo)</ion-option>
                  </ion-select>
                </ion-item>
              </ion-col>
              <ion-col col-4>
                <ion-item>
                  <ion-label floating>Filtro</ion-label>
                  <ion-select interface='popover' [(ngModel)]='filtro' (ngModelChange)="onFiltroGroupChange(filtro)">
                    <ion-option value='0'>Tutti</ion-option>
                    <ion-option value='1'>Solo gruppi</ion-option>
                    <ion-option value='2'>Solo sezioni</ion-option>
                  </ion-select>
                </ion-item>
              </ion-col>
              <ion-col col-4>
                <ion-item>
                   <ion-label floating>Cerca</ion-label> 
                  <ion-input (input)="searchGroups($event)"></ion-input>
                </ion-item>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col col-12>
                <p float-end>Totale gruppi trovati: {{filteredGroups.length}}</p>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col col-12>
                <ion-list>
                  <ion-item *ngFor="let item of filteredGroups">
                    <ion-icon name="contacts" item-start color="green3" *ngIf="item.section" ></ion-icon>
                    <ion-icon *ngIf="!item.section" item-start></ion-icon>
                    {{item.name}}
                    <ion-icon name="md-create" item-end color="magenta1" style="margin-right: 30px" (click)="showGroupModal(item, false)"></ion-icon>
                    <ion-icon name="trash" item-end color="magenta1" style="margin-right: 10px" (click)="deleteGroup(item)"></ion-icon>
                  </ion-item>
                </ion-list>
              </ion-col>
            </ion-row>
          </ion-grid> -->
          <gruppi [selectedSchool]="selectedSchool"></gruppi>
        </div>
        <div *ngSwitchCase="'bus'">
          <!-- <ion-grid inset>
            <ion-row>
              <ion-col col-12>
                <button ion-button color="green1" float-end margin-top (click)="newBusModal()">Aggiungi autobus</button>
              </ion-col>
              <ion-col col-12>
                <hr />
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col col-4>
                <ion-item>
                  <ion-label floating>Ordine</ion-label>
                  <ion-select [(ngModel)]='ordine' (ngModelChange)="onOrdineChange(ordine, selectedSchool.buses)" interface='popover'>
                    <ion-option value='0'>Alfabetico (nome) A-Z</ion-option>
                    <ion-option value='1'>Alfabetico (nome) Z-A</ion-option>
                    <ion-option value='4'>Alfabetico (capolinea) A-Z</ion-option>
                    <ion-option value='5'>Alfabetico (capolinea) Z-A</ion-option>
                    <ion-option value='2'>N. Bambini (dal piu grande)</ion-option>
                    <ion-option value='3'>N. Bambini (dal piu piccolo)</ion-option>
                  </ion-select>
                </ion-item>
              </ion-col>
              <ion-col col-4>
                <p></p>
              </ion-col>
              <ion-col col-4>
                <ion-item>
                   <ion-label floating>Cerca (nome)</ion-label> 
                  <ion-input (input)="searchBus($event)"></ion-input>
                </ion-item>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col col-12>
                <p float-end>Totale autobus trovati: {{filteredBus.length}}</p>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col col-12>
                <ion-list>
                  <ion-item *ngFor="let item of filteredBus">
                    <ion-icon name="bus" item-start color="green3" ></ion-icon>
                    {{item.name}} ({{item.capolinea}})
                    <ion-icon name="md-create" item-end color="magenta1" style="margin-right: 30px" (click)="showBusModal(item, false)"></ion-icon>
                    <ion-icon name="trash" item-end color="magenta1" style="margin-right: 10px" (click)="deleteBus(item)"></ion-icon>
                  </ion-item>
                </ion-list>
              </ion-col>
            </ion-row>
          </ion-grid> -->
          <buses [selectedSchool]="selectedSchool"></buses>
        </div>
        <div *ngSwitchCase="'insegnanti'">
          <insegnanti [selectedSchool]="selectedSchool"></insegnanti>
        </div>
        <div *ngSwitchCase="'bambini'">
          <bambini [selectedSchool]="selectedSchool"></bambini>
        </div>
      </div>
    </ion-col> 
  </ion-grid>
</ion-content>
